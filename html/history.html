<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>{{title}}s History | Facebook Marketing</title>
		<meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
		<link href="/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
		<link href="http://code.ionicframework.com/ionicons/2.0.0/css/ionicons.min.css" rel="stylesheet" type="text/css" />
		<link href="/css/AdminLTE.min.css" rel="stylesheet" type="text/css" />
		<link href="/css/_all-skins.min.css" rel="stylesheet" type="text/css" />
		<link href="/css/iCheck/all.css" rel="stylesheet" type="text/css" />
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
			<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
		<![endif]-->
	</head>
	<body class="skin-black">
		<div class="wrapper">
			<div class="content-wrapper" style="margin-left: 0px;">
				<section class="content">
					<div class="box box-info">
						<div class="box-header with-border">
							<h3 class="box-title">Facebook Marketing | {{title}}s History</h3>
						</div>
						<div class="box-body">
							<div class="row">
								<div class="col-md-1">
									<button class="btn btn-github btn-flat" onclick="window.location = '/'">Back</button>
								</div>
								<div class="col-md-1" id="export-multiple-ids" style="display: none;">
									<button class="btn btn-tumblr btn-flat" onclick="export{{title}}MultipleIDs()">Export IDs</button>
								</div>
							</div>
							<hr>
							<div style="text-align: center;">
								<div id="content">
									{{table}}
								</div>
								<div id="page-selection"></div>
							</div>
						</div>
					</div>
				</section>
			</div>
		</div>
		<script src="/js/jQuery-2.1.3.min.js"></script>
		<script src="/js/bootstrap.min.js" type="text/javascript"></script>
		<script src="/js/jquery.slimscroll.min.js" type="text/javascript"></script>
		<script src='/js/fastclick.min.js'></script>
		<script src="/js/icheck.min.js" type="text/javascript"></script>
		<script src="/js/app.min.js" type="text/javascript"></script>
		<script src="/js/jquery.bootpag.min.js" type="text/javascript"></script>
		<script type="text/javascript">
			$(function() {
				$('input[type="checkbox"].flat-blue, input[type="radio"].flat-blue').iCheck({
					checkboxClass: 'icheckbox_flat-blue'
				});
			});
		</script>
		<script type="text/javascript">
			var pageIndex = 0;
			var rarr = {{array}};
			var pagingCount = {{total}};
			var trinfo = '<tr><td><label style="margin-top: 5px;"><input type="checkbox" name="shit" class="flat-blue"/></label></td><td><div style="padding: 6px 0;font-weight: bold;">{{name}}</div></td><td><button class="btn btn-info btn-flat" type="button" onclick="get{{title}}Posts(\'{{usernameorid}}\')">Get Posts</button></td><td><button class="btn btn-info btn-flat" type="button" onclick="getUsersData(\'{{id}}\')">Get Users Data</button></td><td><button class="btn btn-info btn-flat" type="button" onclick="exportIDs(\'{{id}}\')">Export IDs</button></td><td><button class="btn btn-info btn-flat" type="button" onclick="exportFBMails(\'{{id}}\')">Export Facebook Mails</button></td></tr>';
			var trprimary = '<tr><td><label style="margin-top: 5px;"><input type="checkbox" name="shit" class="flat-blue"/></label></td><td><div style="padding: 6px 0;font-weight: bold;">{{name}}</div></td><td><button class="btn btn-primary btn-flat" type="button" onclick="get{{title}}Posts(\'{{usernameorid}}\')">Get Posts</button></td><td><button class="btn btn-primary btn-flat" type="button" onclick="getUsersData(\'{{id}}\')">Get Users Data</button></td><td><button class="btn btn-primary btn-flat" type="button" onclick="exportIDs(\'{{id}}\')">Export IDs</button></td><td><button class="btn btn-primary btn-flat" type="button" onclick="exportFBMails(\'{{id}}\')">Export Facebook Mails</button></td></tr>';
			$("#page-selection").bootpag({
				total: pagingCount,
				maxVisible: 6,
				page: 1,
				next: ">",
				prev: "<",
				firstLastUse: true,
				first: "<<",
				last: ">>"
			}).on("page", function(event, num) {
				$('#export-multiple-ids').hide();
				pageIndex = num - 1;
				var table = '<table class="table"><tbody>';
				for (var i = ((num - 1) * 6); i < (((num - 1) * 6) + 6); i++) {
					var index = i;
					if (rarr[index]) {
						if (((index + 1) % 2) > 0) {
							table += trinfo.replace(/{{name}}/g, rarr[index].page_name).replace(/{{usernameorid}}/g, rarr[index].page_username).replace(/{{id}}/g, rarr[index].page_id);
						} else {
							table += trprimary.replace(/{{name}}/g, rarr[index].page_name).replace(/{{usernameorid}}/g, rarr[index].page_username).replace(/{{id}}/g, rarr[index].page_id);
						}
					}
				}
				table += '</tbody></table>';
				$("#content").html(table);
				$(function() {
					$('input[type="checkbox"].flat-blue, input[type="radio"].flat-blue').iCheck({
						checkboxClass: 'icheckbox_flat-blue'
					});
				});
				$('input').on('ifChecked', function() {
					$('#export-multiple-ids').show();
				});
				$('input').on('ifUnchecked', function(event) {
					var count = 1;
					var totalCount = 0;
					$('.icheckbox_flat-blue').each(function() {
						totalCount++;
						if (!$(this).hasClass('checked')) {
							count++;
						}
					});
					if (count == totalCount) {
						$('#export-multiple-ids').hide();
					}
				});
			});
		</script>
		<script src="/js/history.js" type="text/javascript"></script>
	</body>
</html>